<div class = "row title-table">
   <div class = "col-md-6"  style="padding-left: 0px;">
      <p>Riesgos <span class="label label-primary"><%=@riesgos.count%></span> <span style = "font-size:12px;margin-left:20px;"> <%= page_riesgo_info  @riesgos, :entry_name => 'Riesgos' %></span> </p>


     
   </div>


     <div class = "col-md-4 paginate text-left title-table1">
       
     </div>


   <div class = "col-md-2">
      <%= link_to 'Nuevo', new_riesgo_path, class: "btn btn-primary", style: "float: right;" if current_user.role == "SuperAdmin"  || current_user.rol.configuracion %>
   </div>
</div>
<br>
<table class="table">
  <thead>
    <tr class = "tr-table">


      <th>Descripcion</th>
      <th>Proceso</th>
      <th>Clasificacion</th>
      <th>Fuente de Riesgo</th>
      <th>VNR</th>
      <th>Valoracion</th>
      <th style="width: 150px;">Acciones</th>
    </tr>
  </thead>

  <tbody>
    <% @riesgos.each do |riesgo| %>
      <tr>


        <td><%= riesgo.descripcion %></td>
       <td><%= riesgo.proceso.name %></td>
        <td><%= riesgo.classification_risk.name if riesgo.classification_risk %></td>
         <td><%=riesgo.risk_source.name if riesgo.risk_source  %></td>
        <td class="text-center" ><%= !riesgo.risk_value.nil? ? riesgo.risk_value : "Sin Valorar" %></td>
          <td  style="text-align:center;font-size:15px;background:<%=get_riesgo(riesgo.risk_value)[2] if !riesgo.risk_value.nil?%>;color:<%= !riesgo.risk_value.nil? ? "white !important" : "gray"%>">
               <strong style="color:<%= "white !important" if !riesgo.risk_value.nil? %>"><%= !riesgo.risk_value.nil? ? get_riesgo(riesgo.risk_value)[1] : "Sin Valorar" %></strong></td>
        <td>

        <%= link_to  riesgo, class: "btn btn-warning" do %>
          <i class="fas fa-eye" style="color: #fff"></i>
          <% end -%>

        <%= link_to  edit_riesgo_path(riesgo), class: "btn btn-warning" do %>
          <i class="fas fa-pencil-alt" style="color: #fff"></i>
          <% end -%>

        <%= link_to  riesgo, class: "btn btn-danger", method: :delete, data: {
              confirm: 'Â¿Estas Seguro?',
              'confirm-button-text': 'Borrar',
              'cancel-button-text': 'Cancelar',
              'confirm-button-color': '#CC0000',
               text: 'Recuerda que el registro se borrara permanentemente',
              'image-url': ''} do %>
                <i class="fas fa-trash-alt" style="color: #fff"></i>
              <% end -%>
                
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

    <div class="row">
        <div class = "col-md-12 paginate text-center title-table1">
            <%= will_paginate  @riesgos%>
        </div>
   </div>

<style>

  .btn-warning{
    background: #37b597;
    border-color: #37b597;
  }

  .btn-warning:hover{
    background: #37b597;
    border-color: #37b597;
  }
  
</style>

<!--
<table id="dataTable" class="table table-striped table-bordered" cellspacing="0" width="100%" dis>
            <thead>
              <tr class="filters">
                <th><input/></th>
                <th><input/></th>
                 <th>
                  <%= collection_select(:proceso, :proceso_id, Proceso.all, :id, :name, include_blank: true) %>
                </th>
                 <th>
                  <%= collection_select(:riesgo, :risk_source_id, RiskSource.all, :id, :name, include_blank: true) %>
                </th>
                
               
              </tr>
              <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Proceso</th>
                <th>risk source</th>
   
   
                
              </tr>
            </thead>
            <tbody></tbody>
          </table>-->

<script >
   $('#dataTable').dataTable({
    searching: true,
    ordering: true,
    deferRender: true,
    lengthMenu: [10, 25, 50, 100],
    serverSide: true,
   
    "language": {
            "lengthMenu": "Display _MENU_ records per page",
            "zeroRecords": "Nothing found - sorry",
            "info": "Mostrando _START_ a _END_ de _TOTAL_  registros",
            "infoEmpty": "No hay Registros",
            "infoFiltered": "(filtered from _MAX_ total records)",
            "lengthMenu": "Mostrando _MENU_ registros ",
            "paginate": {
                "first":      "Primero",
                "last":       "Ultimo",
                "next":       "Siguiente",
                "previous":   "Anterior"
               },
        },
    initComplete: function() {
      return $('.filters input, .filters select', this).on('change', (function(_this) {
        return function(e) {
          var th;
          th = $(e.target).closest("th");
          return _this.api().column(th.index()).search($(e.target).val()).draw();
        };
      })(this));
    },
        ajax: "http://localhost:3000/riesgos/?format=json",
        columns: [
          {
            data: "id"
          }, {
            data: "descripcion"
          }, {
            data: "risk_proceso_name"
          },
          {
            data: "risk_source_name"
          }
        ]
      });
</script>


<style>
  
   */
.dataTables_filter {
  width: 50%;
  float: right;
  padding-left: 5px;
  padding: 0px 0px 5px;
  border-bottom: 1px solid #E5E5E5;
  font-size: 12px;
  display: none !important;
}
.dataTables_filter label {
  padding: 0px;
  line-height: 26px;
  height: auto;
  margin: 0px;
  font-weight: normal;
}
.dataTables_filter label input {
  width: 150px;
  display: inline;
  margin-left: 5px;
}
.dataTables_length {
  width: 50%;
  float: left;
  padding: 0px 0px 5px;
  border-bottom: 1px solid #E5E5E5;
  font-size: 12px;
}
#dataTable_filter {

  display: none !important;
}
</style>